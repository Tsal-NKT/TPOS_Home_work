Модуль import_playbook нельзя добавлять в список задач описанный в yml

Для объединения задач в логичесчкие блоки с одни условием выполнения удобно использовать блоки "block"

методы import и include отличаются по выполнению и распределению условий when между задачами из импортируемых файлов 

В случае если есть конфликт ninja2, то надо проверить, а не установленно случайно две версии этого инструмента

Для выполенения выражений в директиве when не нужно ставить скобки {{ ... }}. Иначе вылезает предупреждение

Задание общих директив доступно, только в inventory файле. В playbook и подобных можно задавать общие переменные, но не директивы.
Директивы задаются в конструкциях выше, напр., для task в block или play